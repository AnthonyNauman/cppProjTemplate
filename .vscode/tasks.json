{
	"version": "2.0.0",
	"inputs": [
		{
			"id": "LocalPass",
			"default": "user",
			"type": "promptString",
			"description": "Local user password",
			"password": true
		},
		{
			"id": "DockerPass",
			"default": "user",
			"type": "promptString",
			"description": "Docker user password",
			"password": true
		},
		{
			"id": "BuildType",
			"description": "Cmake project build type.",
			"options": [
				"Debug",
				"Release",
				"RelWithDebInfo",
				"MinSizeRel"
			],
			"type": "pickString",
			"default": "Release"
		},
		{
			"id": "Arch",
			"description": "Architecture.",
			"options": [
				"x86_64",
				"armv7hf"
			],
			"type": "pickString",
			"default": "x86_64"
		},
		{
			"id": "TargetName",
			"type": "command",
			"command": "shellCommand.execute",
			"args": {
				"command": "cat ${workspaceFolder}/.vscode/run/options | grep apps",
				"cwd": "${workspaceFolder}",
				"env": {
					"WORKSPACE": "${workspaceFolder[0]}",
					"FILE": "${file}",
					"PROJECT": "${workspaceFolderBasename}"
				}
			}
		},
		{
			"id": "TestName",
			"type": "command",
			"command": "shellCommand.execute",
			"args": {
				"command": "cat ${workspaceFolder}/.vscode/run/options | grep tests",
				"cwd": "${workspaceFolder}",
				"env": {
					"WORKSPACE": "${workspaceFolder[0]}",
					"FILE": "${file}",
					"PROJECT": "${workspaceFolderBasename}"
				}
			}
		}
	],
	"tasks": [
		{
			"type": "shell",
			"label": "[Docker] C/C++: Build",
			"command": "./scripts/build.sh",
			"args": [
				"--arch=${input:Arch}",
				"--docker",
				"--build-type=${input:BuildType}",
				"--build-target=All"
			],
			"group": {
				"kind": "build",
				"isDefault": true
			},
			"icon": {
				"color": "terminal.ansiBlue",
				"id": "vm-connect"
			}
		},
		{
			"type": "shell",
			"label": "[Docker] C/C++: Clear",
			"command": "echo ${input:DockerPass} | sudo -S rm -rf ${workspaceFolder}/build-*",
			"group": {
				"kind": "build",
				"isDefault": true
			},
			"icon": {
				"color": "terminal.ansiRed",
				"id": "chrome-close"
			}
		},
		{
			"type": "shell",
			"label": "C/C++: Build Apps",
			"command": "./scripts/build.sh",
			"args": [
				"--build-type=${input:BuildType}",
				"--build-targets=Apps"
			],
			"group": {
				"kind": "build",
				"isDefault": true
			},
			"icon": {
				"color": "terminal.ansiBlue",
				"id": "circuit-board"
			}
		},
		{
			"type": "shell",
			"label": "C/C++: Build",
			"command": "./scripts/build.sh",
			"args": [
				"--build-type=${input:BuildType}",
				"--build-targets=All"
			],
			"group": {
				"kind": "build",
				"isDefault": true
			},
			"icon": {
				"color": "terminal.ansiBlue",
				"id": "circuit-board"
			}
		},
		{
			"type": "shell",
			"label": "C/C++: Build & Run Tests",
			"command": [
				"${workspaceFolder}/.vscode/clear.sh",
				" && ",
				"${workspaceFolder}/scripts/build.sh --build-type=Release --build-targets=Tests",
				" && ",
				"${workspaceFolder}/scripts/run_all_tests.sh"
			],
			"group": {
				"kind": "build",
				"isDefault": true
			},
			"icon": {
				"color": "terminal.ansiBlue",
				"id": "circuit-board"
			}
		},
		{
			"type": "shell",
			"label": "C/C++: Clear",
			"command": "${workspaceFolder}/.vscode/clear.sh",
			"group": {
				"kind": "build",
				"isDefault": true
			},
			"icon": {
				"color": "terminal.ansiRed",
				"id": "chrome-close"
			}
		},
		{
			"label": "Run: Target",
			"type": "shell",
			"command": "${workspaceFolder}/.vscode/run_option.sh",
			"args": [
				"${input:TargetName}"
			],
			"problemMatcher": [],
			"icon": {
				"color": "terminal.ansiGreen",
				"id": "debug-start"
			}
		},

		{
			"label": "Run: Test",
			"type": "shell",
			"command": "${workspaceFolder}/.vscode/run_option.sh",
			"args": [
				"${input:TestName}"
			],
			"problemMatcher": [],
			"icon": {
				"color": "terminal.ansiGreen",
				"id": "debug-start"
			}
		},
		{
			"label": "Run: All Tests",
			"type": "shell",
			"command": "${workspaceFolder}/scripts/run_all_tests.sh",
			"args": [
				"${workspaceFolder}/artifacts"
			],
			"problemMatcher": [],
			"icon": {
				"color": "terminal.ansiGreen",
				"id": "debug-start"
			}
		},
		// =================================
		{
			"type": "shell",
			"label": "Utils: Generating Documents",
			"command": "./scripts/generate_docs.sh",
			"group": {
				"kind": "test",
				"isDefault": true
			},
			"icon": {
				"color": "terminal.ansiYellow",
				"id": "new-file"
			}
		},
		{
			"type": "shell",
			"label": "Utils: Format source files",
			"command": "./scripts/format.sh",
			"group": {
				"kind": "test",
				"isDefault": true
			},
			"icon": {
				"color": "terminal.ansiYellow",
				"id": "symbol-parameter"
			}
		}
	]
}